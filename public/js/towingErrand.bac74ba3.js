(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["towingErrand"],{"0aa0":function(t,e,n){"use strict";var a=n("ec51"),r=n.n(a);r.a},"448b":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form"},[0==t.type?n("input",{attrs:{type:"text",name:"name",autocomplete:"off",maxlength:t.maxlength,required:""},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}):1==t.type?n("input",{attrs:{type:"password",name:"name",autocomplete:"off",maxlength:t.maxlength,required:""},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}):n("input",{attrs:{type:"number",name:"name",autocomplete:"off",min:t.min,max:t.max,required:""},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),n("label",{staticClass:"label-name",attrs:{for:"name"}},[n("span",{staticClass:"content-name"},[t._v(" "+t._s(t.labelText)+" ")])])])},r=[],i={props:{type:{type:Number,default:0},value:{type:String,default:""},labelText:{type:String,default:"test"},maxlength:{type:Number,default:32},min:{type:Number,default:0},max:{type:Number,default:1e4}}},s=i,o=(n("0aa0"),n("2877")),u=Object(o["a"])(s,a,r,!1,null,null,null);e["a"]=u.exports},"50cf":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"camera"},[n("video",{staticClass:"feed",attrs:{autoplay:"",playsinline:""}}),n("i",{staticClass:"icon fas fa-window-close",on:{click:function(e){return t.$emit("close")}}}),n("button",{attrs:{id:"snap"},on:{click:t.takepicture}}),n("canvas",{staticClass:"hidden",attrs:{id:"canvas"}}),n("div",{class:{flash:t.isFlash,hidden:!t.isFlash}})])},r=[],i={name:"Camera",data:function(){return{front:!1,videoPlayer:null,canvas:null,photo:null,snapBtn:null,width:window.innerWidth,height:window.innerHeight,streaming:!1,isFlash:!1}},beforeMount:function(){this.videoPlayer=document.querySelector("video"),this.canvas=document.getElementById("canvas"),this.photo=document.getElementById("photo"),this.startbutton=document.getElementById("snap"),this.width=window.innerWidth,this.height=window.innerHeight,this.init()},created:function(){},methods:{init:function(){if("mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices){navigator.mediaDevices.getUserMedia({video:{width:{min:1280,max:1280},height:{min:720,max:720},facingMode:this.front?"user":"environment"}}).then((function(t){var e=document.querySelector("video");e.srcObject=t,e.play()}));var t=document.querySelector("video");t.addEventListener("canplay",(function(t){this.streaming||(console.log(this.width+" "+this.height),this.streaming=!0)}),!1)}else alert("cannot get Media Devices"),this.$emit("close")},takepicture:function(){var t=this,e=document.getElementById("canvas"),n=e.getContext("2d");if(this.width&&this.height){e.width=1560,e.height=1440;var a=document.querySelector("video");n.drawImage(a,0,0,1560,1440);var r=e.toDataURL("image/png");this.isFlash=!0,setTimeout((function(){t.isFlash=!1}),500),this.$emit("take",r)}else alert("clearphoto")}}},s=i,o=(n("e902"),n("2877")),u=Object(o["a"])(s,a,r,!1,null,null,null);e["a"]=u.exports},"652c":function(t,e,n){},8194:function(t,e,n){"use strict";var a=n("9ca3"),r=n.n(a);r.a},"9ca3":function(t,e,n){},"9e06":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex_box"},[n("form",{staticClass:"flex_box errand",attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.insertPhotos(e)}}},[n("input-label",{attrs:{type:0,"label-text":"Numer zlecenia"},model:{value:t.errandNumber,callback:function(e){t.errandNumber=e},expression:"errandNumber"}}),n("i",{staticClass:"fas fa-camera",on:{click:function(e){t.takePhoto=!t.takePhoto}}}),t.error?n("p",{staticClass:"message message--error"},[t._v(" "+t._s(t.error)+" ")]):t._e(),n("button",{attrs:{type:"submit"}},[t._v(" Wy≈õlij ")])],1)]),n("button",{on:{click:t.getErrand}},[t._v(" Test ")]),t.takePhoto?n("Camera",{on:{take:t.takePhotoF,close:function(e){t.takePhoto=!1}}}):t._e(),n("swiper",{staticClass:"swiper",attrs:{options:t.swiperOption}},[t._l(t.photos,(function(t){return n("swiper-slide",{key:t,staticClass:"slide"},[n("img",{attrs:{src:t}})])})),n("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"}),n("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"})],2),t._l(t.errands,(function(e){return n("p",{key:e._id},[n("router-link",{attrs:{to:{name:"errand",params:{towingErrandId:e._id}}}},[n("span",[t._v(" "+t._s(e.errandNumber)+" ")])])],1)}))],2)},r=[],i=n("a34a"),s=n.n(i),o=n("50cf"),u=n("448b"),c=n("d722"),l=n("7212");n("e25d");function d(t,e,n,a,r,i,s){try{var o=t[i](s),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(a,r)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){d(i,a,r,s,o,"next",t)}function o(t){d(i,a,r,s,o,"throw",t)}s(void 0)}))}}var h={components:{Camera:o["a"],InputLabel:u["a"],Swiper:l["Swiper"],SwiperSlide:l["SwiperSlide"]},data:function(){return{swiperOption:{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},errandNumber:null,photos:[],takePhoto:!1,error:null,errands:null,errand:null}},beforeRouteEnter:function(){var t=p(s.a.mark((function t(e,n,a){var r;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].listTowingErrands();case 2:if(r=t.sent,200===r.status){t.next=5;break}return t.abrupt("return",this.error=r.data.message);case 5:a((function(t){console.log(r.data),t.errands=r.data})),a();case 7:case"end":return t.stop()}}),t,this)})));function e(e,n,a){return t.apply(this,arguments)}return e}(),methods:{takePhotoF:function(t){console.log("added photo to array"+t),this.photos.push(t)},insertPhotos:function(){var t=p(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].insertPhotos({errandNumber:this.errandNumber,photos:this.photos});case 2:if(e=t.sent,alert("2"),200===e.status){t.next=6;break}return t.abrupt("return",this.error=e.data.message);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getErrand:function(){var t=p(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].getErrand(this.errands[1]._id);case 2:if(e=t.sent,alert("21"),200===e.status){t.next=6;break}return t.abrupt("return",this.error=e.data.message);case 6:this.errand=e.data;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},m=h,f=(n("8194"),n("2877")),v=Object(f["a"])(m,a,r,!1,null,"5d028b41",null);e["default"]=v.exports},e902:function(t,e,n){"use strict";var a=n("652c"),r=n.n(a);r.a},ec51:function(t,e,n){}}]);