(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["towingErrand"],{"0922":function(t,e,r){},"19ac":function(t,e,r){"use strict";var n=r("0922"),a=r.n(n);a.a},"9e06":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.show?r("div",{staticClass:"flex_box center"},[t.loaded?t._e():r("div",{staticClass:"spinner"}),r("div",{staticClass:"flex_box dates"},[r("div",{staticClass:"date-box"},[r("span",{staticClass:"content-name"},[t._v(" Od daty ")]),r("date-picker",{staticClass:"date",attrs:{"value-type":"format",required:""},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1),r("div",{staticClass:"date-box"},[r("span",{staticClass:"content-name"},[t._v(" Do daty ")]),r("date-picker",{staticClass:"date",attrs:{"value-type":"format",required:""},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1),r("button",{on:{click:function(e){return t.getErrandsByDate()}}},[t._v(" Szukaj ")])]),r("div",{staticClass:"wrapper"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),r("div",{staticClass:"table"},[r("p",[t._v(" Numer zlecenia ")]),r("p",[t._v(" Kierowca ")]),r("p",[t._v(" Status ")]),r("transition-group",{attrs:{name:"list-complete",tag:"p"}},t._l(t.filtered,(function(e){return r("span",{key:e._id,staticClass:"list-complete-item"},[r("router-link",{attrs:{to:{name:"errand",params:{towingErrandId:e._id}}}},[t._v(" "+t._s(e.errandNumber)+" ")])],1)})),0),r("transition-group",{attrs:{name:"list-complete",tag:"p"}},t._l(t.filtered,(function(e){return r("span",{key:e._id,staticClass:"list-complete-item"},[t._v(" "+t._s(e.userId.username)+" ")])})),0),r("transition-group",{attrs:{name:"list-complete",tag:"p"}},t._l(t.filtered,(function(e){return r("span",{key:e._id,staticClass:"list-complete-item"},[t._v(" "+t._s(e.status)+" ")])})),0)],1)]),t.errands&&0!=t.errands.length?t._e():r("p",[t._v(" Brak zleceÅ„ ")])]):t._e()},a=[],s=r("a34a"),i=r.n(s),o=r("d722"),u=r("ec45");r("411c");function l(t,e,r,n,a,s,i){try{var o=t[s](i),u=o.value}catch(l){return void r(l)}o.done?e(u):Promise.resolve(u).then(n,a)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(t){l(s,n,a,i,o,"next",t)}function o(t){l(s,n,a,i,o,"throw",t)}i(void 0)}))}}var d={components:{DatePicker:u["a"]},data:function(){return{query:"",search:null,loadedErrands:10,error:null,errands:null,filtered:[],loaded:!0,show:!1,el:null,fromDate:null,toDate:null,fieldsNumber:0,fields:[],columnNumber:0}},computed:{computedList:function(){var t=this;return this.errands.filter((function(e){return-1!==e.errandNumber.toLowerCase().indexOf(t.query.toLowerCase())}))}},watch:{query:function(t,e){var r=this;this.filtered=this.errands.filter((function(t,e){return-1!==t.errandNumber.toLowerCase().indexOf(r.query.toLowerCase())})),console.log(this.filtered)}},mounted:function(){var t=this;setTimeout((function(){t.show=!0}),500)},beforeRouteUpdate:function(){var t=c(i.a.mark((function t(e,r,n){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].listTowingErrands("today",{fromDate:null,toDate:null});case 2:if(a=t.sent,200===a.status){t.next=5;break}return t.abrupt("return",n({name:"insertTowingErrand"}));case 5:this.errands=a.data,this.filtered=a.data,n();case 8:case"end":return t.stop()}}),t,this)})));function e(e,r,n){return t.apply(this,arguments)}return e}(),beforeRouteEnter:function(){var t=c(i.a.mark((function t(e,r,n){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].listTowingErrands("brak",{fromDate:null,toDate:null});case 2:if(a=t.sent,200===a.status){t.next=5;break}return t.abrupt("return",n({name:"insertTowingErrand"}));case 5:n((function(t){t.errands=a.data,t.filtered=a.data}));case 6:case"end":return t.stop()}}),t)})));function e(e,r,n){return t.apply(this,arguments)}return e}(),methods:{getErrandsByDate:function(){var t=c(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].listTowingErrands("dowolny",{fromDate:this.fromDate,toDate:this.toDate});case 2:e=t.sent,200!==e.status&&this.$router.push({name:"insertTowingErrand"}),console.log(e.data),this.errands=e.data,this.filtered=e.data;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),fillFields:function(){var t=this;this.fields.length>0&&this.fields.splice(this.columnNumber,this.fields.length),this.filtered.forEach((function(e,r){if(0===r&&0===t.fields.length)for(var n in e)"_id"===n&&(console.log(n),t.fields.push(n),t.columnNumber++);for(var a in e)"_id"===a&&("userId"===a?t.fields.push(e[a].username):t.fields.push(e[a]))})),console.log(this.fields)},filterList:function(){var t=this;this.filtered=this.errands,this.filtered=this.errands.filter((function(e){return-1!==e.errandNumber.toLowerCase().indexOf(t.query.toLowerCase())}))}}},f=d,p=(r("19ac"),r("2877")),m=Object(p["a"])(f,n,a,!1,null,"f621175c",null);e["default"]=m.exports}}]);